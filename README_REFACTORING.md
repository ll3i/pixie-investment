# Flask Blueprint ë¦¬íŒ©í† ë§ ê°€ì´ë“œ

## ğŸ¯ ë¦¬íŒ©í† ë§ ê°œìš”

Pixie ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°ì—ì„œ Blueprint ê¸°ë°˜ ëª¨ë“ˆí™” êµ¬ì¡°ë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ë³€ê²½ì‚¬í•­

1. **ëª¨ë“ˆí™” êµ¬ì¡°**
   - 5,910ì¤„ì˜ ë‹¨ì¼ `app.py` â†’ Blueprint ê¸°ë°˜ ëª¨ë“ˆ ë¶„ë¦¬
   - ê¸°ëŠ¥ë³„ ë¼ìš°íŠ¸ ê·¸ë£¹í™”
   - ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë„ì…

2. **ìƒˆë¡œìš´ ë””ë ‰í† ë¦¬ êµ¬ì¡°**
```
web/
â”œâ”€â”€ app_refactored.py      # ë¦¬íŒ©í† ë§ëœ ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ config.py              # ì¤‘ì•™í™”ëœ ì„¤ì • ê´€ë¦¬
â”œâ”€â”€ blueprints/            # Blueprint ëª¨ë“ˆë“¤
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ auth/              # ì¸ì¦/ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ routes.py
â”‚   â”œâ”€â”€ chat/              # ì±„íŒ…/AI ìƒë‹´
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ routes.py
â”‚   â”œâ”€â”€ news/              # ë‰´ìŠ¤ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ routes.py
â”‚   â”œâ”€â”€ stock/             # ì£¼ì‹/í¬íŠ¸í´ë¦¬ì˜¤
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ routes.py
â”‚   â”œâ”€â”€ learning/          # í•™ìŠµ ì»¨í…ì¸  (TODO)
â”‚   â”œâ”€â”€ alerts/            # ì•Œë¦¼ ê´€ë¦¬ (TODO)
â”‚   â””â”€â”€ utils/             # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚       â””â”€â”€ decorators.py
â”œâ”€â”€ services/              # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ user_service.py
â”‚   â”œâ”€â”€ survey_service.py
â”‚   â”œâ”€â”€ database_service.py
â”‚   â””â”€â”€ ... (ì¶”ê°€ ì„œë¹„ìŠ¤ë“¤)
â””â”€â”€ models/                # ë°ì´í„° ëª¨ë¸ (TODO)
```

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. ìƒˆë¡œìš´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
```bash
# ë¦¬íŒ©í† ë§ëœ ì•± ì‹¤í–‰
python app_refactored.py

# ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í›„ ì‹¤í–‰
export FLASK_ENV=development
python app_refactored.py
```

### 2. ê¸°ì¡´ ì•±ê³¼ ë³‘í–‰ ì‹¤í–‰
- ê¸°ì¡´ `app.py`ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ë¨
- ìƒˆ êµ¬ì¡°ëŠ” `app_refactored.py`ë¡œ ë³„ë„ ì‹¤í–‰ ê°€ëŠ¥
- ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥

## ğŸ“‹ Blueprint êµ¬ì¡°

### 1. Auth Blueprint (`/auth`)
- `/survey` - ì„¤ë¬¸ì¡°ì‚¬ í˜ì´ì§€
- `/submit_survey` - ì„¤ë¬¸ ì œì¶œ
- `/survey/result` - ê²°ê³¼ í˜ì´ì§€
- `/profile-status` - í”„ë¡œí•„ ìƒíƒœ
- `/profile` - í”„ë¡œí•„ ì¡°íšŒ

### 2. Chat Blueprint (`/api`)
- `/chat` - AI ì±„íŒ… (ìŠ¤íŠ¸ë¦¬ë°)
- `/chat-stream` - SSE ìŠ¤íŠ¸ë¦¼
- `/chat-history` - ì±„íŒ… ê¸°ë¡
- `/clear-chat` - ì±„íŒ… ì´ˆê¸°í™”
- `/export-chat` - ì±„íŒ… ë‚´ë³´ë‚´ê¸°

### 3. News Blueprint (`/api/news`)
- `/` - ë‰´ìŠ¤ ëª©ë¡
- `/today` - ì˜¤ëŠ˜ì˜ ë‰´ìŠ¤
- `/portfolio` - í¬íŠ¸í´ë¦¬ì˜¤ ë‰´ìŠ¤
- `/watchlist` - ê´€ì‹¬ì¢…ëª© ë‰´ìŠ¤
- `/popular` - ì¸ê¸° ë‰´ìŠ¤
- `/sentiment` - ê°ì„± ë¶„ì„
- `/analysis` - AI ë¶„ì„
- `/keywords` - í‚¤ì›Œë“œ ê´€ë¦¬
- `/recommend` - ë§ì¶¤ ì¶”ì²œ

### 4. Stock Blueprint (`/api/stock`)
- `/price` - ì£¼ê°€ ì¡°íšŒ
- `/info/<code>` - ì¢…ëª© ì •ë³´
- `/search` - ì¢…ëª© ê²€ìƒ‰
- `/list` - ì¢…ëª© ëª©ë¡
- `/watchlist` - ê´€ì‹¬ ì¢…ëª©
- `/portfolio/*` - í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë ¨
- `/time-series-prediction` - ì‹œê³„ì—´ ì˜ˆì¸¡
- `/risk-alerts` - ìœ„í—˜ ì•Œë¦¼

## ğŸ› ï¸ ì£¼ìš” ê°œì„ ì‚¬í•­

### 1. ì½”ë“œ êµ¬ì¡° ê°œì„ 
- **ê´€ì‹¬ì‚¬ ë¶„ë¦¬**: ê° ê¸°ëŠ¥ë³„ë¡œ ë…ë¦½ëœ ëª¨ë“ˆ
- **ì¬ì‚¬ìš©ì„±**: ê³µí†µ ë¡œì§ì„ ë°ì½”ë ˆì´í„°ì™€ ì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬
- **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: ëª¨ë“ˆë³„ ë…ë¦½ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- **ìœ ì§€ë³´ìˆ˜ì„±**: ê¸°ëŠ¥ë³„ íŒŒì¼ ë¶„ë¦¬ë¡œ ê´€ë¦¬ ìš©ì´

### 2. ë³´ì•ˆ ê°•í™”
- **ë°ì½”ë ˆì´í„° ê¸°ë°˜ ì¸ì¦**: `@require_auth`
- **ì—ëŸ¬ í•¸ë“¤ë§**: `@handle_errors`
- **ì…ë ¥ ê²€ì¦**: `@validate_json`
- **Rate Limiting**: `@rate_limit`

### 3. ì„±ëŠ¥ ìµœì í™”
- **ì‘ë‹µ ìºì‹±**: `@cache_response`
- **ìš”ì²­ ë¡œê¹…**: `@log_request`
- **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ë§** (TODO)
- **ë¹„ë™ê¸° ì²˜ë¦¬** (TODO)

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### Phase 1: êµ¬ì¡° ë¶„ë¦¬ (ì™„ë£Œ)
- [x] Blueprint ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- [x] ì¸ì¦/ì‚¬ìš©ì Blueprint ë¶„ë¦¬
- [x] ì±„íŒ…/AI Blueprint ë¶„ë¦¬
- [x] ë‰´ìŠ¤ Blueprint ë¶„ë¦¬
- [x] ì£¼ì‹/í¬íŠ¸í´ë¦¬ì˜¤ Blueprint ë¶„ë¦¬
- [x] ê³µí†µ ìœ í‹¸ë¦¬í‹° ë¶„ë¦¬
- [x] ì„¤ì • íŒŒì¼ ì¤‘ì•™í™”

### Phase 2: ì„œë¹„ìŠ¤ ë ˆì´ì–´ (ì§„í–‰ì¤‘)
- [x] UserService êµ¬í˜„
- [x] SurveyService êµ¬í˜„
- [x] DatabaseService êµ¬í˜„
- [ ] ChatService êµ¬í˜„
- [ ] NewsService êµ¬í˜„
- [ ] StockService êµ¬í˜„
- [ ] PortfolioService êµ¬í˜„

### Phase 3: ì¶”ê°€ ê°œì„  (TODO)
- [ ] í•™ìŠµ Blueprint ë¶„ë¦¬
- [ ] ì•Œë¦¼ Blueprint ë¶„ë¦¬
- [ ] ë°ì´í„° ëª¨ë¸ ì •ì˜
- [ ] API ë²„ì „ê´€ë¦¬ ë„ì…
- [ ] OpenAPI ë¬¸ì„œí™”
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **í˜¸í™˜ì„± ìœ ì§€**
   - ê¸°ì¡´ API ì—”ë“œí¬ì¸íŠ¸ëŠ” ë™ì¼í•˜ê²Œ ìœ ì§€
   - í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”
   - ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥

2. **í™˜ê²½ ë³€ìˆ˜**
   - ê¸°ì¡´ `.env` íŒŒì¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©
   - ìƒˆë¡œìš´ ì„¤ì •ì€ `config.py`ì—ì„œ ê´€ë¦¬

3. **ë°ì´í„°ë² ì´ìŠ¤**
   - ê¸°ì¡´ SQLite ë°ì´í„°ë² ì´ìŠ¤ í˜¸í™˜
   - ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì—†ìŒ

## ğŸš§ ë‹¤ìŒ ë‹¨ê³„

1. **ì„œë¹„ìŠ¤ ë ˆì´ì–´ ì™„ì„±**
   ```bash
   /implement remaining-services --type service
   ```

2. **í…ŒìŠ¤íŠ¸ ì‘ì„±**
   ```bash
   /implement unit-tests --framework pytest
   ```

3. **API ë¬¸ì„œí™”**
   ```bash
   /implement api-documentation --type openapi
   ```

4. **ì„±ëŠ¥ ìµœì í™”**
   ```bash
   /improve performance --focus database-queries
   ```

5. **í”„ë¡œë•ì…˜ ì¤€ë¹„**
   ```bash
   /implement production-ready --focus security
   ```

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [Flask Blueprints ê³µì‹ ë¬¸ì„œ](https://flask.palletsprojects.com/en/2.0.x/blueprints/)
- [Flask ì• í”Œë¦¬ì¼€ì´ì…˜ íŒ©í† ë¦¬ íŒ¨í„´](https://flask.palletsprojects.com/en/2.0.x/patterns/appfactories/)
- [Flask í…ŒìŠ¤íŒ… ê°€ì´ë“œ](https://flask.palletsprojects.com/en/2.0.x/testing/)
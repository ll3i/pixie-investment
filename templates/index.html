{% extends 'layout.html' %}

{% block title %}Pixie - AI íˆ¬ì ì–´ë“œë°”ì´ì €{% endblock %}

{% block body_class %}custom-nav-page{% endblock %}

{% block extra_css %}
<style>
    /* Figma ë””ìì¸ ê¸°ë°˜ Pixie í™ˆí˜ì´ì§€ ìŠ¤íƒ€ì¼ */
    :root {
        --pixie-primary: #1454FE;
        --pixie-primary-dark: #0B3DCF;
        --pixie-secondary: #5E97F4;
        --pixie-dark: #2F2E41;
        --pixie-dark-light: #3F3D56;
        --pixie-gray: #474747;
        --pixie-light-gray: #F5F5F5;
        --pixie-white: #FFFFFF;
        --pixie-black: #000000;
        --pixie-green: #22C55E;
        --pixie-text-muted: #8F8F8F;
        --pixie-gradient: linear-gradient(90deg, #5E97F4 0%, #3B7AFF 100%);
        --pixie-shadow: 0px 2px 4px rgba(0, 0, 0, 0.15);
        --pixie-shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Pretendard', 'Noto Sans KR', sans-serif;
        line-height: 1.6;
        color: var(--pixie-black);
        background: var(--pixie-white);
        overflow-x: hidden;
    }

    /* ë„¤ë¹„ê²Œì´ì…˜ ì˜¤ë²„ë¼ì´ë“œ */
    .pixie-navbar {
        background: var(--pixie-white);
        box-shadow: var(--pixie-shadow);
        padding: 36px 134px;
        position: sticky;
        top: 0;
        z-index: 1000;
    }

    .pixie-nav-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1920px;
        margin: 0 auto;
    }

    .pixie-logo {
        display: flex;
        align-items: center;
        text-decoration: none;
    }
    
    .pixie-logo img {
        height: 40px;
        width: auto;
    }

    .pixie-nav-menu {
        display: flex;
        gap: 100px;
        list-style: none;
        margin: 0;
        padding: 0;
    }

    .pixie-nav-item {
        text-align: center;
        color: var(--pixie-black);
        font-size: 24px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 600;
        line-height: 33.6px;
        text-decoration: none;
        transition: color 0.2s ease;
    }

    .pixie-nav-item:hover {
        color: var(--pixie-primary);
    }

    .pixie-nav-icons {
        display: flex;
        gap: 43px;
        align-items: center;
    }

    .pixie-nav-icon {
        width: 29px;
        height: 29px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        background: transparent;
        color: var(--pixie-black);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 16px;
    }

    .pixie-nav-icon:hover {
        background: var(--pixie-primary);
        color: var(--pixie-white);
    }

    /* íˆì–´ë¡œ ì„¹ì…˜ */
    .pixie-hero {
        min-height: 604px;
        background: var(--pixie-light-gray);
        display: flex;
        align-items: center;
        padding: 0 242px;
        position: relative;
        overflow: hidden;
    }

    .pixie-hero-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        max-width: 1920px;
        margin: 0 auto;
    }

    .pixie-hero-text {
        flex: 1;
        max-width: 800px;
    }

    .pixie-hero-title {
        color: var(--pixie-black);
        font-size: 48px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 700;
        margin-bottom: 20px;
        line-height: 1.2;
    }

    .pixie-hero-description {
        color: var(--pixie-gray);
        font-size: 18px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 400;
        line-height: 27px;
        margin-bottom: 40px;
        max-width: 600px;
        white-space: pre-line;
    }

    .pixie-hero-buttons {
        display: flex;
        gap: 20px;
        align-items: center;
        flex-wrap: wrap;
    }

    .pixie-btn-primary {
        background: var(--pixie-primary);
        color: var(--pixie-white);
        border: none;
        padding: 16px 33px;
        border-radius: 8px;
        font-size: 20px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 500;
        line-height: 28px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 16px;
        transition: all 0.2s ease;
        cursor: pointer;
    }

    .pixie-btn-primary:hover {
        background: var(--pixie-primary-dark);
        transform: translateY(-2px);
        color: var(--pixie-white);
    }

    .pixie-btn-secondary {
        background: transparent;
        color: var(--pixie-primary);
        border: 1px solid var(--pixie-primary);
        padding: 16px 33px;
        border-radius: 8px;
        font-size: 20px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 500;
        line-height: 28px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 16px;
        transition: all 0.2s ease;
        cursor: pointer;
    }

    .pixie-btn-secondary:hover {
        background: var(--pixie-primary);
        color: var(--pixie-white);
        transform: translateY(-2px);
    }

    /* íˆì–´ë¡œ ì°¨íŠ¸ ì‹œê°í™” */
    .pixie-hero-visual {
        position: relative;
        width: 400px;
        height: 400px;
        margin-left: 100px;
    }

    .pixie-chart-container {
        position: relative;
        width: 100%;
        height: 100%;
    }

    .pixie-chart-bars {
        position: absolute;
        bottom: 100px;
        right: 100px;
        display: flex;
        align-items: end;
        gap: 15px;
    }

    .pixie-chart-bar {
        width: 37px;
        background: var(--pixie-gradient);
        border-radius: 4px 4px 0 0;
        position: relative;
    }


    .pixie-chart-bar.bar1 { height: 108px; }
    .pixie-chart-bar.bar2 { height: 148px; }
    .pixie-chart-bar.bar3 { height: 108px; }
    .pixie-chart-bar.bar4 { height: 164px; }
    .pixie-chart-bar.bar5 { height: 193px; }

    /* ì‹œì¥ ê°ì • ë°°ë„ˆ */
    .market-sentiment-banner {
        background: linear-gradient(135deg, #f0f4ff 0%, #e8efff 100%);
        border-radius: 16px;
        padding: 24px 32px;
        margin-bottom: 40px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
    }

    .sentiment-loading {
        text-align: center;
        color: #666;
        font-size: 16px;
    }

    .sentiment-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 24px;
    }

    .sentiment-main {
        flex: 1;
    }

    .sentiment-score {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
    }

    .sentiment-icon {
        font-size: 32px;
    }

    .sentiment-value {
        font-size: 28px;
        font-weight: 700;
        color: #1a1a1a;
    }

    .sentiment-mood {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 8px;
    }

    .sentiment-mood.positive { color: #10b981; }
    .sentiment-mood.negative { color: #ef4444; }
    .sentiment-mood.neutral { color: #6b7280; }

    .sentiment-description {
        color: #666;
        font-size: 14px;
        line-height: 1.6;
    }

    .sentiment-stats {
        display: flex;
        gap: 32px;
    }

    .sentiment-stat {
        text-align: center;
    }

    .sentiment-stat-value {
        font-size: 24px;
        font-weight: 700;
        color: #1a1a1a;
        display: block;
    }

    .sentiment-stat-label {
        color: #666;
        font-size: 13px;
        margin-top: 4px;
    }

    .watchlist-notice {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 8px;
        padding: 12px 16px;
        margin-bottom: 24px;
        font-size: 14px;
        color: #856404;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .watchlist-notice i {
        color: #f39c12;
    }

    .pixie-hero-person {
        position: absolute;
        bottom: 50px;
        right: 0;
        width: 200px;
        height: 250px;
        background-image: url('/static/images/dash1.png');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
    }

    .pixie-chart-line {
        position: absolute;
        bottom: 185px;
        right: 100px;
        width: 330px;
        height: 1px;
        background: #CBCBCB;
    }

    /* ì´ìŠˆ ì¢…ëª© ì¶”ì²œ ì„¹ì…˜ */
    .pixie-issues-section {
        padding: 100px 96px;
        background: var(--pixie-white);
    }

    .pixie-section-title {
        color: var(--pixie-black);
        font-size: 36px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 700;
        line-height: 46.8px;
        margin-bottom: 60px;
    }

    .pixie-issues-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(414px, 1fr));
        gap: 24px;
        margin-top: 40px;
    }

    .pixie-issue-card {
        background: var(--pixie-light-gray);
        border-radius: 28px;
        overflow: hidden;
        position: relative;
    }

    .pixie-issue-card.tall {
        height: 621px;
    }

    .pixie-issue-card.short {
        height: 226px;
        background: #272727;
        color: var(--pixie-white);
        padding: 40px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .pixie-issue-content {
        padding: 40px;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .pixie-issue-title {
        color: var(--pixie-black);
        font-size: 28px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 600;
        line-height: 39.2px;
        margin-bottom: 20px;
    }

    .pixie-issue-stocks {
        color: var(--pixie-white);
        font-size: 16px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 400;
        line-height: 24px;
        margin-bottom: 20px;
    }

    .pixie-issue-label {
        color: var(--pixie-white);
        font-size: 20px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 500;
        line-height: 28px;
        margin-bottom: 10px;
    }

    .pixie-issue-highlight {
        color: var(--pixie-secondary);
        font-size: 16px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 700;
        line-height: 24px;
    }

    .pixie-issue-btn {
        background: var(--pixie-black);
        color: var(--pixie-white);
        border: none;
        padding: 14px 25px;
        border-radius: 200px;
        font-size: 18px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 400;
        line-height: 27px;
        cursor: pointer;
        transition: all 0.2s ease;
        backdrop-filter: blur(100px);
        margin-bottom: 20px;
        align-self: flex-start;
    }

    .pixie-issue-btn:hover {
        background: var(--pixie-primary);
    }

    /* íŠ¸ë Œë“œ ë§µ ì„¹ì…˜ */
    .pixie-trends-section {
        padding: 100px 96px;
        background: var(--pixie-white);
    }

    .pixie-trends-description {
        color: var(--pixie-text-muted);
        font-size: 20px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 500;
        line-height: 28px;
        margin-bottom: 20px;
    }

    .pixie-trends-note {
        color: #3B7AFF;
        font-size: 20px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 500;
        line-height: 28px;
        margin-bottom: 60px;
    }

    .pixie-trends-row {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 28px;
        margin-bottom: 40px;
        flex-wrap: wrap;
    }

    .pixie-trend-tag {
        padding: 33px 75px;
        border-radius: 82px;
        border: 2.5px solid var(--pixie-black);
        background: transparent;
        text-align: center;
        color: var(--pixie-black);
        font-size: 48px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 300;
        text-decoration: none;
        transition: all 0.2s ease;
        white-space: nowrap;
    }

    .pixie-trend-tag.active {
        background: #3B7AFF;
        color: var(--pixie-white);
        border-color: var(--pixie-white);
    }

    .pixie-trend-tag:hover {
        background: var(--pixie-primary);
        color: var(--pixie-white);
        border-color: var(--pixie-white);
        transform: translateY(-4px);
    }

    /* ì„œë¹„ìŠ¤ ì†Œê°œ ì„¹ì…˜ */
    .pixie-services-section {
        padding: 100px 96px;
        background: var(--pixie-white);
    }

    .pixie-services-title {
        color: var(--pixie-black);
        font-size: 36px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 700;
        line-height: 46.8px;
        margin-bottom: 80px;
        text-align: center;
    }

    .pixie-services-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(360px, 1fr));
        gap: 40px;
    }

    .pixie-service-card {
        background: var(--pixie-light-gray);
        border-radius: 28px;
        padding: 60px 40px;
        text-align: center;
        transition: all 0.3s ease;
        height: 362px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .pixie-service-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--pixie-shadow-lg);
    }

    .pixie-service-icon {
        width: 74px;
        height: 74px;
        background: var(--pixie-primary);
        margin: 0 auto 20px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
        color: var(--pixie-white);
    }

    .pixie-service-label {
        color: var(--pixie-gray);
        font-size: 20px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 700;
        line-height: 30px;
        margin-bottom: 30px;
    }

    .pixie-service-title {
        color: var(--pixie-black);
        font-size: 36px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 700;
        line-height: 46.8px;
        margin-bottom: 20px;
    }

    .pixie-service-description {
        color: var(--pixie-gray);
        font-size: 18px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 400;
        line-height: 27px;
        margin-bottom: 40px;
    }

    .pixie-service-btn {
        background: transparent;
        color: var(--pixie-primary);
        border: 1px solid var(--pixie-primary);
        padding: 16px 33px;
        border-radius: 8px;
        font-size: 20px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 500;
        line-height: 28px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 16px;
        transition: all 0.2s ease;
        justify-content: center;
    }

    .pixie-service-btn:hover {
        background: var(--pixie-primary);
        color: var(--pixie-white);
        transform: translateY(-2px);
    }

    /* í‘¸í„° */
    .pixie-footer {
        background: var(--pixie-white);
        padding: 80px 96px;
        border-top: 1px solid #E2E8F0;
    }

    .pixie-footer-content {
        max-width: 1728px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 60px;
        margin-bottom: 40px;
    }

    .pixie-footer-brand {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .pixie-footer-logo {
        color: var(--pixie-primary);
        font-size: 40px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 700;
        letter-spacing: 1.2px;
    }

    .pixie-footer-tagline {
        color: var(--pixie-black);
        font-size: 14px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 300;
        line-height: 19.6px;
    }

    .pixie-footer-section h4 {
        color: var(--pixie-black);
        font-size: 14px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 400;
        line-height: 21px;
        margin-bottom: 16px;
    }

    .pixie-footer-section p {
        color: var(--pixie-gray);
        font-size: 14px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 400;
        line-height: 21px;
        opacity: 0.5;
    }

    .pixie-footer-bottom {
        border-top: 1px solid #E2E8F0;
        padding-top: 40px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: var(--pixie-gray);
        font-size: 14px;
        font-family: 'Pretendard', sans-serif;
        font-weight: 400;
        line-height: 21px;
    }

    /* ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 1400px) {
        .pixie-navbar,
        .pixie-hero,
        .pixie-issues-section,
        .pixie-trends-section,
        .pixie-services-section,
        .pixie-footer {
            padding-left: 40px;
            padding-right: 40px;
        }
    }

    @media (max-width: 1024px) {
        .pixie-nav-menu {
            gap: 50px;
        }
        
        .pixie-nav-item {
            font-size: 18px;
        }
        
        .pixie-hero-content {
            flex-direction: column;
            gap: 60px;
        }
        
        .pixie-hero-visual {
            margin-left: 0;
        }
        
        .pixie-hero-title {
            font-size: 36px;
        }
        
        .pixie-trend-tag {
            font-size: 36px;
            padding: 25px 50px;
        }
        
        .pixie-issues-grid {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 768px) {
        .pixie-navbar {
            padding: 20px;
        }
        
        .pixie-logo {
            font-size: 28px;
        }
        
        .pixie-nav-menu {
            display: none;
        }
        
        .pixie-hero {
            padding: 40px 20px;
        }
        
        .pixie-hero-title {
            font-size: 28px;
        }
        
        .pixie-hero-description {
            font-size: 16px;
        }
        
        .pixie-hero-buttons {
            flex-direction: column;
            align-items: stretch;
        }
        
        .pixie-hero-visual {
            width: 300px;
            height: 300px;
        }
        
        .pixie-section-title,
        .pixie-services-title {
            font-size: 28px;
        }
        
        .pixie-trend-tag {
            font-size: 24px;
            padding: 20px 40px;
        }
        
        .pixie-trends-row {
            flex-direction: column;
            gap: 20px;
        }
        
        .pixie-service-title {
            font-size: 24px;
        }
        
        .pixie-issues-section,
        .pixie-trends-section,
        .pixie-services-section,
        .pixie-footer {
            padding: 60px 20px;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- ì»¤ìŠ¤í…€ ë„¤ë¹„ê²Œì´ì…˜ -->
<nav class="pixie-navbar">
    <div class="pixie-nav-content">
        <a href="/" class="pixie-logo">Pixie</a>
        
        <ul class="pixie-nav-menu">
            <li><a href="/survey" class="pixie-nav-item">íˆ¬ì ì„¤ë¬¸</a></li>
            <li><a href="/learning" class="pixie-nav-item">íˆ¬ìí•™ìŠµ</a></li>
            <li><a href="/news" class="pixie-nav-item">ë‰´ìŠ¤/ì´ìŠˆ</a></li>
            <li><a href="/my-investment" class="pixie-nav-item">MY íˆ¬ì</a></li>
        </ul>
        
        <div class="pixie-nav-icons">
            <div class="pixie-nav-icon" onclick="window.location.href='/search'">
                <i class="fas fa-search"></i>
            </div>
            <div class="pixie-nav-icon" onclick="window.location.href='/alerts'">
                <i class="fas fa-bell"></i>
            </div>
            <div class="pixie-nav-icon" onclick="window.location.href='/profile'">
                <i class="fas fa-user"></i>
            </div>
        </div>
    </div>
</nav>

<!-- íˆì–´ë¡œ ì„¹ì…˜ -->
<section class="pixie-hero">
    <div class="pixie-hero-content">
        <div class="pixie-hero-text">
            <h1 class="pixie-hero-title">ë‹¹ì‹ ì˜ ë˜‘ë˜‘í•œ íˆ¬ì íŒŒíŠ¸ë„ˆ, í”½ì‹œ<br>í•¨ê»˜ ë§Œë“œëŠ” ë‚˜ë§Œì˜ íˆ¬ì ì „ëµ</h1>
            <p class="pixie-hero-description">
                AI ê¸°ë°˜ ë¶„ì„ìœ¼ë¡œ ë‹¹ì‹ ì˜ íˆ¬ì ì„±í–¥ê³¼ ì‹œì¥ íë¦„ì„ ì •ë°€í•˜ê²Œ íŒŒì•…í•˜ê³ ,<br>
                ë§ì¶¤ ì „ëµì„ ì¶”ì²œí•´ë“œë ¤ìš”. í”½ì‹œì™€ í•¨ê»˜ ë” ìŠ¤ë§ˆíŠ¸í•œ íˆ¬ì ì—¬ì •ì„ ì‹œì‘í•´ë³´ì„¸ìš”.
            </p>
            <div class="pixie-hero-buttons">
                <a href="/survey" class="pixie-btn-primary">íˆ¬ì ì„±í–¥ ë¶„ì„ ì‹œì‘</a>
                <a href="/my-investment" class="pixie-btn-secondary">
                    MY íˆ¬ì ë³´ëŸ¬ê°€ê¸°
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
        
        <div class="pixie-hero-visual">
            <div class="pixie-chart-container">
                <div class="pixie-hero-person"></div>
                <div class="pixie-chart-line"></div>
            </div>
        </div>
    </div>
</section>

<!-- ì˜¤ëŠ˜ì˜ ì´ìŠˆ ì¢…ëª© ì¶”ì²œ -->
<section class="pixie-issues-section">
    <h2 class="pixie-section-title">ì˜¤ëŠ˜ì˜ ì´ìŠˆ ì¢…ëª© ì¶”ì²œ</h2>
    
    <!-- ì‹œì¥ ê°ì • ë¶„ì„ ë°°ë„ˆ -->
    <div class="market-sentiment-banner" id="marketSentimentBanner">
        <div class="sentiment-loading">
            <i class="fas fa-spinner fa-spin"></i> ì‹œì¥ ë¶„ìœ„ê¸° ë¶„ì„ ì¤‘...
        </div>
    </div>
    
    <!-- ê´€ì‹¬ ì¢…ëª© ì•Œë¦¼ -->
    <div class="watchlist-notice" id="watchlistNotice" style="display: none;">
        <i class="fas fa-info-circle"></i>
        <span>MY íˆ¬ìì—ì„œ ê´€ì‹¬ ì¢…ëª©ì„ ì¶”ê°€í•˜ë©´ ë§ì¶¤í˜• ë‰´ìŠ¤ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
    </div>
    
    <div class="pixie-issues-grid" id="issueStocksGrid">
        <!-- ë°˜ë„ì²´ ì¹´ë“œ -->
        <div class="pixie-issue-card tall">
            <div class="pixie-issue-content">
                <div>
                    <h3 class="pixie-issue-title">ë°˜ë„ì²´ ê³µê¸‰ë‚œ ì¬ì í™”?<br>ê´€ë ¨ ì¢…ëª© ì£¼ëª©!</h3>
                </div>
                <div class="pixie-issue-card short" style="margin: 20px 0; border-radius: 20px;">
                    <div>
                        <button class="pixie-issue-btn">ê´€ë ¨ ê¸°ì‚¬ ì›ë¬¸</button>
                        <p class="pixie-issue-label">í•µì‹¬ ì¢…ëª©</p>
                        <p class="pixie-issue-stocks">ì‚¼ì„±ì „ì â€“ íˆ¬ì ì¤‘ì‹¬ ê¸°ì—…<br>DBí•˜ì´í… â€“ AI ë°˜ë„ì²´ ê´€ë ¨ ë¶€í’ˆ ìˆ˜í˜œì£¼<br>ì›ìµIPS â€“ ë°˜ë„ì²´ ì¥ë¹„ ê³µê¸‰ì‚¬</p>
                        <p class="pixie-issue-highlight">ì¥ë¹„ ìˆ˜ìš” ê¸‰ì¦ìœ¼ë¡œ ìˆ˜í˜œ ê°€ëŠ¥ì„± â†‘</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë©”íƒ€ë²„ìŠ¤ ì¹´ë“œ -->
        <div class="pixie-issue-card tall">
            <div class="pixie-issue-content">
                <div>
                    <h3 class="pixie-issue-title">ë‹¤ì‹œ ë©”íƒ€ë²„ìŠ¤ ì—´í’,<br>ê´€ë ¨ ê¸°ìˆ ì£¼ ë‹¤ì‹œ ë¶€ê°</h3>
                </div>
                <div class="pixie-issue-card short" style="margin: 20px 0; border-radius: 20px;">
                    <div>
                        <button class="pixie-issue-btn">ê´€ë ¨ ê¸°ì‚¬ ì›ë¬¸</button>
                        <p class="pixie-issue-label">í•µì‹¬ ì¢…ëª©</p>
                        <p class="pixie-issue-stocks">ë§¥ìŠ¤íŠ¸ - AR(ì¦ê°•í˜„ì‹¤) ì†Œí”„íŠ¸ì›¨ì–´<br>ì„ ìµì‹œìŠ¤í…œ - OLED ì¦ì°© ì¥ë¹„ ì œì¡°</p>
                        <p class="pixie-issue-highlight">XR ë””ë°”ì´ìŠ¤ ìˆ˜ìš” í™•ëŒ€ì— ë”°ë¥¸ ì½˜í…ì¸ Â·ë¶€í’ˆ ê¸°ì—… ë™ë°˜ ìˆ˜í˜œ ê°€ëŠ¥ì„± â†‘</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë¹„ë©”ëª¨ë¦¬ ì¹´ë“œ -->
        <div class="pixie-issue-card tall">
            <div class="pixie-issue-content">
                <div>
                    <h3 class="pixie-issue-title">ë¹„ë©”ëª¨ë¦¬ ìœ¡ì„± ë³¸ê²©í™”â€¦<br>íŒŒìš´ë“œë¦¬ ì‹œì¥ í‚¤ìš´ë‹¤!</h3>
                </div>
                <div class="pixie-issue-card short" style="margin: 20px 0; border-radius: 20px;">
                    <div>
                        <button class="pixie-issue-btn">ê´€ë ¨ ê¸°ì‚¬ ì›ë¬¸</button>
                        <p class="pixie-issue-label">í•µì‹¬ ì¢…ëª©</p>
                        <p class="pixie-issue-stocks">DBí•˜ì´í… â€“ íŒŒìš´ë“œë¦¬ ìƒì‚°ëŠ¥ë ¥ í™•ëŒ€<br>SKí•˜ì´ë‹‰ìŠ¤ â€“ CIS ë“± ë¹„ë©”ëª¨ë¦¬ íˆ¬ì ê°•í™”</p>
                        <p class="pixie-issue-highlight">ë¹„ë©”ëª¨ë¦¬ ìƒíƒœê³„ í™•ì¥ìœ¼ë¡œ ì¥ë¹„ì£¼ê¹Œì§€ ìˆ˜í˜œ ì „ë§â†‘</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ììœ¨ì£¼í–‰ ì¹´ë“œ -->
        <div class="pixie-issue-card tall">
            <div class="pixie-issue-content">
                <div>
                    <h3 class="pixie-issue-title">ììœ¨ì£¼í–‰ ê·œì œ ì™„í™”ë˜ì–´<br>ë¡œë³´íƒì‹œ ìƒìš©í™” ë°•ì°¨</h3>
                </div>
                <div class="pixie-issue-card short" style="margin: 20px 0; border-radius: 20px;">
                    <div>
                        <button class="pixie-issue-btn">ê´€ë ¨ ê¸°ì‚¬ ì›ë¬¸</button>
                        <p class="pixie-issue-label">í•µì‹¬ ì¢…ëª©</p>
                        <p class="pixie-issue-stocks">ë¼ë‹‰ìŠ¤ â€“ ììœ¨ì£¼í–‰ìš© í†µì‹ ì¹© ê¸°ìˆ  ë³´ìœ <br>ì„¸ì½”ë‹‰ìŠ¤ â€“ ì¹´ë©”ë¼ ëª¨ë“ˆ ìˆ˜ìš” ì¦ê°€ ìˆ˜í˜œ</p>
                        <p class="pixie-issue-highlight">ì™„ì „ììœ¨ì£¼í–‰ ìƒìš©í™” ìˆ˜í˜œ, ë¶€í’ˆì£¼ ì¤‘ì‹¬ìœ¼ë¡œ ê´€ì‹¬â†‘</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- íŠ¸ë Œë“œ ë§µ -->
<section class="pixie-trends-section">
    <h2 class="pixie-section-title">íŠ¸ë Œë“œ ë§µ</h2>
    <p class="pixie-trends-description">AI ë¹„ì„œ í”½ì‹œê°€ ì‚°ì—…ë³„ íŠ¸ë Œë“œ ë§µì„ ì‹œê°í™”í•˜ê³ , ì†Œì…œ íˆ¬ì í”¼ë“œë¥¼ ë¶„ì„í•´ ì£¼ëª©ë°›ëŠ” í‚¤ì›Œë“œë¥¼ ì•Œë ¤ë“œë ¤ìš”.</p>
    <p class="pixie-trends-note">ì–¸ê¸‰ëŸ‰ ê¸‰ì¦ (ì „ì¼ ëŒ€ë¹„ +%)</p>
    
    <div class="pixie-trends-row">
        <a href="#" class="pixie-trend-tag">#AI ë°˜ë„ì²´</a>
        <a href="#" class="pixie-trend-tag active">#ì‚¼ì„±ì „ì</a>
        <a href="#" class="pixie-trend-tag">#2ì°¨ì „ì§€</a>
    </div>
    
    <div class="pixie-trends-row">
        <a href="#" class="pixie-trend-tag active">#ë””ìŠ¤í”Œë ˆì´</a>
        <a href="#" class="pixie-trend-tag">#ë°”ì´ì˜¤</a>
        <a href="#" class="pixie-trend-tag">#ìœ ì „ì ì¹˜ë£Œì œ</a>
        <a href="#" class="pixie-trend-tag active">#í…ŒìŠ¬ë¼ ì˜µí‹°ë¨¸ìŠ¤</a>
    </div>
    
    <div class="pixie-trends-row">
        <a href="#" class="pixie-trend-tag active">#IRA ë²•ì•ˆ</a>
        <a href="#" class="pixie-trend-tag">#íƒ„ì†Œë°°ì¶œê¶Œ</a>
        <a href="#" class="pixie-trend-tag">#í† ëª© SOC</a>
    </div>
</section>

<!-- ì„œë¹„ìŠ¤ ì†Œê°œ -->
<section class="pixie-services-section">
    <h2 class="pixie-services-title">ë˜‘ë˜‘í•œ íˆ¬ì ì „ëµ,<br>ì§€ê¸ˆ ë°”ë¡œ í”½ì‹œì™€ ì‹œì‘í•´ë³´ì„¸ìš”</h2>
    
    <div class="pixie-services-grid">
        <div class="pixie-service-card">
            <div>
                <div class="pixie-service-icon">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <p class="pixie-service-label">íˆ¬ì ì„¤ë¬¸</p>
                <h3 class="pixie-service-title">íˆ¬ì ì„±í–¥ ë¶„ì„</h3>
                <p class="pixie-service-description">10ê°€ì§€ ë¬¸í•­ì— ë‹µë³€í•˜ì—¬ íˆ¬ì ìŠ¤íƒ€ì¼ê³¼ ìœ„í—˜ ì„±í–¥ì„ íŒŒì•…í•˜ê³ ,<br>ì´ë¥¼ í†µí•´ ë§ì¶¤í˜• íˆ¬ì ì „ëµì„ ì œì‹œí•©ë‹ˆë‹¤.</p>
            </div>
            <a href="/survey" class="pixie-service-btn">
                ì‹œì‘í•˜ê¸°
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>

        <div class="pixie-service-card">
            <div>
                <div class="pixie-service-icon">
                    <i class="fas fa-chart-pie"></i>
                </div>
                <p class="pixie-service-label">MY íˆ¬ì</p>
                <h3 class="pixie-service-title">í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì²œ</h3>
                <p class="pixie-service-description">AI ê¸°ë°˜ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë¶„ì„ëœ ìµœì ì˜ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.<br>ì‹œì¥ ë³€ë™ì„± ë° ìˆ˜ìµë¥ ì„ ê³ ë ¤í•œ ë§ì¶¤í˜• ì œì•ˆì„ ë°›ì•„ë³´ì„¸ìš”.</p>
            </div>
            <a href="/my-investment" class="pixie-service-btn">
                ê²°ê³¼ ë³´ê¸°
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>

        <div class="pixie-service-card">
            <div>
                <div class="pixie-service-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <p class="pixie-service-label">íˆ¬ì ì±—ë´‡</p>
                <h3 class="pixie-service-title">AI íˆ¬ì ì±—ë´‡, í”½ì‹œ</h3>
                <p class="pixie-service-description">24ì‹œê°„ ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ìƒë‹´ì„ ì œê³µí•˜ëŠ” AI íˆ¬ì ì–´ì‹œìŠ¤í„´íŠ¸.<br>ì‹¤ì‹œê°„ ì§ˆë¬¸ì— ë‹µë³€í•˜ê³  ë§ì¶¤í˜• íˆ¬ì ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
            </div>
            <a href="/chatbot" class="pixie-service-btn">
                ìƒë‹´í•˜ê¸°
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
</section>

<!-- í‘¸í„° -->
<footer class="pixie-footer">
    <div class="pixie-footer-content">
        <div class="pixie-footer-brand">
            <div class="pixie-footer-logo">Pixie</div>
            <p class="pixie-footer-tagline">ë‹¹ì‹ ì˜ ë˜‘ë˜‘í•œ íˆ¬ì íŒŒíŠ¸ë„ˆ, í”½ì‹œ</p>
        </div>
        
        <div class="pixie-footer-section">
            <h4>Resources</h4>
            <p>Desktop Web</p>
        </div>
        
        <div class="pixie-footer-section">
            <h4>Team íŒ€ëª…</h4>
        </div>
        
        <div class="pixie-footer-section">
            <h4>Tools Â· Stack</h4>
            <p>Figma</p>
        </div>
        
        <div class="pixie-footer-section">
            <h4>Legal</h4>
            <p>Abuse</p>
            <p>Terms</p>
        </div>
    </div>
    
    <div class="pixie-footer-bottom">
        <p>Â© 2025 PIXIE All rights reserved.</p>
        <p>ë°ëª¨ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ìˆ˜ì§‘ëœ ì •ë³´ëŠ” ì €ì¥ë˜ì§€ ì•Šìœ¼ë©°, ì‹œì—° ëª©ì  ì™¸ì—ëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤</p>
    </div>
</footer>

<script>
// í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
document.addEventListener('DOMContentLoaded', function() {
    loadMarketSentiment();
    loadIssueStocks();
    checkWatchlist();
});

// ì‹œì¥ ê°ì • ë¶„ì„ ë°ì´í„° ë¡œë“œ
async function loadMarketSentiment() {
    try {
        const response = await fetch('/api/news-sentiment');
        const data = await response.json();
        
        if (data.success) {
            displayMarketSentiment(data.sentiment_analysis);
        }
    } catch (error) {
        console.error('ì‹œì¥ ê°ì • ë¶„ì„ ë¡œë“œ ì‹¤íŒ¨:', error);
        document.getElementById('marketSentimentBanner').style.display = 'none';
    }
}

// ì‹œì¥ ê°ì • ë¶„ì„ í‘œì‹œ
function displayMarketSentiment(sentiment) {
    const banner = document.getElementById('marketSentimentBanner');
    const mood = sentiment.market_mood;
    const distribution = sentiment.sentiment_distribution;
    
    let moodClass = 'neutral';
    let moodIcon = 'ğŸ˜';
    
    if (mood.score >= 0.2) {
        moodClass = 'positive';
        moodIcon = 'ğŸ“ˆ';
    } else if (mood.score <= -0.2) {
        moodClass = 'negative';
        moodIcon = 'ğŸ“‰';
    }
    
    banner.innerHTML = `
        <div class="sentiment-content">
            <div class="sentiment-main">
                <div class="sentiment-score">
                    <span class="sentiment-icon">${moodIcon}</span>
                    <span class="sentiment-value">${(sentiment.overall_sentiment * 100).toFixed(0)}ì </span>
                </div>
                <div class="sentiment-mood ${moodClass}">${mood.mood}</div>
                <div class="sentiment-description">${mood.description}</div>
                <div class="sentiment-description" style="margin-top: 8px; font-weight: 500;">
                    ğŸ’¡ ${mood.recommendation}
                </div>
            </div>
            <div class="sentiment-stats">
                <div class="sentiment-stat">
                    <span class="sentiment-stat-value" style="color: #10b981;">${distribution.positive}</span>
                    <span class="sentiment-stat-label">ê¸ì • ë‰´ìŠ¤</span>
                </div>
                <div class="sentiment-stat">
                    <span class="sentiment-stat-value" style="color: #6b7280;">${distribution.neutral}</span>
                    <span class="sentiment-stat-label">ì¤‘ë¦½ ë‰´ìŠ¤</span>
                </div>
                <div class="sentiment-stat">
                    <span class="sentiment-stat-value" style="color: #ef4444;">${distribution.negative}</span>
                    <span class="sentiment-stat-label">ë¶€ì • ë‰´ìŠ¤</span>
                </div>
            </div>
        </div>
    `;
}

// ì´ìŠˆ ì¢…ëª© ë¡œë“œ
async function loadIssueStocks() {
    try {
        // ì‚¬ìš©ì ê´€ì‹¬ ì¢…ëª© ê¸°ë°˜ ë‰´ìŠ¤ ë¡œë“œ
        const response = await fetch('/api/news-portfolio?filter=domestic');
        const data = await response.json();
        
        if (data.success && data.news_list.length > 0) {
            displayIssueStocks(data.news_list);
        }
    } catch (error) {
        console.error('ì´ìŠˆ ì¢…ëª© ë¡œë“œ ì‹¤íŒ¨:', error);
        // ê¸°ë³¸ ì¢…ëª© í‘œì‹œ ìœ ì§€
    }
}

// ì´ìŠˆ ì¢…ëª© í‘œì‹œ
function displayIssueStocks(newsList) {
    const grid = document.getElementById('issueStocksGrid');
    
    // ì¢…ëª©ë³„ë¡œ ë‰´ìŠ¤ ê·¸ë£¹í™”
    const stockNews = {};
    newsList.forEach(news => {
        // ì œëª©ì—ì„œ ì¢…ëª©ëª… ì¶”ì¶œ
        const stockPattern = /(ì‚¼ì„±ì „ì|SKí•˜ì´ë‹‰ìŠ¤|LGì—ë„ˆì§€ì†”ë£¨ì…˜|í˜„ëŒ€ì°¨|ê¸°ì•„|ë„¤ì´ë²„|ì¹´ì¹´ì˜¤)/g;
        const matches = news.title.match(stockPattern);
        
        if (matches) {
            matches.forEach(stock => {
                if (!stockNews[stock]) {
                    stockNews[stock] = [];
                }
                stockNews[stock].push(news);
            });
        }
    });
    
    // ìƒìœ„ 4ê°œ ì¢…ëª©ë§Œ í‘œì‹œ
    const topStocks = Object.entries(stockNews)
        .sort((a, b) => b[1].length - a[1].length)
        .slice(0, 4);
    
    if (topStocks.length > 0) {
        // ê¸°ì¡´ ë‚´ìš© ìœ ì§€í•˜ë©´ì„œ ê´€ë ¨ ë‰´ìŠ¤ ìˆ˜ ì—…ë°ì´íŠ¸
        const cards = grid.querySelectorAll('.pixie-issue-card.tall');
        cards.forEach((card, index) => {
            if (index < topStocks.length) {
                const [stock, news] = topStocks[index];
                const btn = card.querySelector('.pixie-issue-btn');
                if (btn) {
                    btn.textContent = `ê´€ë ¨ ë‰´ìŠ¤ ${news.length}ê±´`;
                    btn.onclick = () => window.location.href = '/news';
                }
            }
        });
    }
}

// ê´€ì‹¬ ì¢…ëª© í™•ì¸
async function checkWatchlist() {
    try {
        const response = await fetch('/api/watchlist');
        const data = await response.json();
        
        if (data.success && data.watchlist.length === 0) {
            document.getElementById('watchlistNotice').style.display = 'flex';
        }
    } catch (error) {
        console.error('ê´€ì‹¬ ì¢…ëª© í™•ì¸ ì‹¤íŒ¨:', error);
    }
}

// ê¸°ì¡´ íŠ¸ë Œë“œ íƒœê·¸ ì¸í„°ë™ì…˜
document.querySelectorAll('.pixie-trend-tag').forEach(tag => {
    tag.addEventListener('click', function(e) {
        e.preventDefault();
        // í˜„ì¬ í™œì„±í™”ëœ íƒœê·¸ë“¤ ì œê±°
        document.querySelectorAll('.pixie-trend-tag.active').forEach(activeTag => {
            if (activeTag !== this) {
                activeTag.classList.remove('active');
            }
        });
        // í´ë¦­ëœ íƒœê·¸ í† ê¸€
        this.classList.toggle('active');
    });
});

// ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤í¬ë¡¤ íš¨ê³¼
window.addEventListener('scroll', function() {
    const navbar = document.querySelector('.pixie-navbar');
    if (window.scrollY > 100) {
        navbar.style.background = 'rgba(255, 255, 255, 0.95)';
        navbar.style.backdropFilter = 'blur(10px)';
    } else {
        navbar.style.background = 'var(--pixie-white)';
        navbar.style.backdropFilter = 'none';
    }
});

// ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
</script>
{% endblock %} 